(this["webpackJsonpstonks-app"]=this["webpackJsonpstonks-app"]||[]).push([[0],{12:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r,c=n(1),s=n.n(c),a=n(16),i=n.n(a),o=(n(26),n(9)),u=n.n(o),l=n(13),d=n(4),h=n(5),j=n(7),b=n(6),f=(n(12),n(17)),m=n.n(f);function p(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function O(e){return new Promise((function(t,n){m.a.parse(e,{complete:function(e){var n=e.data,c=n.findIndex((function(e){return"Account Trade History"===e[0]}))+2,s=n.findIndex((function(e,t){return t>c&&1===e.length})),a=n.slice(c,s);t(a.map((function(e){return{date:new Date(e[r.date]),side:e[r.side],qty:parseInt(e[r.qty],10),symbol:e[r.symbol],price:p(parseFloat(e[r.price]),4),orderType:e[r.orderType]}})))}})}))}!function(e){e[e.date=1]="date",e[e.side=3]="side",e[e.qty=4]="qty",e[e.symbol=6]="symbol",e[e.price=10]="price",e[e.orderType=12]="orderType"}(r||(r={}));var x=n(20),y=n(21),v=n(18),g=n(3),k=n.n(g);function C(e){var t=k()(e.sell.date).diff(k()(e.buy.date))/1e3,n=t>=60?"".concat(Math.floor(t/60),"m"):"",r=t%60?"".concat(Math.floor(t%60),"s"):"";return"".concat(n," ").concat(r)}function M(e){return e.reduce((function(e,t){return e.buy+=t.buy.price*t.buy.qty,e.sell+=Math.abs(t.sell.price*t.sell.qty),e}),{buy:0,sell:0})}function w(e){return e.reduce((function(e,t){return t.sell.price>t.buy.price?(e.numWon++,e.amountWon+=(t.sell.price-t.buy.price)*t.buy.qty):t.sell.price<t.buy.price&&(e.numLost++,e.amountLost+=Math.abs((t.sell.price-t.buy.price)*t.buy.qty)),e}),{numWon:0,numLost:0,amountWon:0,amountLost:0})}function S(e){var t=w(e),n=t.numWon;return n/(n+t.numLost)}function T(e){var t=w(e);return t.amountWon/t.numWon/(t.amountLost/t.numLost)}function D(e){var t=M(e);return t.sell-t.buy}function L(e){var t=M(e),n=t.buy/e.length;return(t.sell-t.buy)/n}function P(e){return k()(e).format("M/D/YY h:mm:ss")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=Math.abs(e).toString().split("."),r=Object(y.a)(n,1),c=r[0],s="0"!==c?c.length:1,a=s+t;return new Intl.NumberFormat("en-US",{maximumSignificantDigits:a,style:"currency",currency:"USD"}).format(e)}function F(e){return"".concat(Object(v.round)(100*e,2),"%")}var Y=n(2);function N(e){for(var t=Object(x.a)(e).sort((function(e,t){return e.date.getTime()-t.date.getTime()})),n=[],r=function(){var e=t.findIndex((function(e){return"BUY"===e.side})),r=t[e];if(!r)return"break";var c=t.findIndex((function(e){return"SELL"===e.side&&e.symbol===r.symbol&&Math.abs(e.qty)===r.qty})),s=t[c];if(!s)return t.splice(e,1),"continue";t.splice(e,1),t.splice(c-1,1),n.push({buy:r,sell:s})};t.length;){var c=r();if("break"===c)break}return n}var W=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"renderTrades",value:function(){var e=N(this.props.trades);return Object(Y.jsxs)("table",{className:"matched-trades",children:[Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{children:"Symbol"}),Object(Y.jsx)("th",{children:"Buy Time"}),Object(Y.jsx)("th",{children:"Sell Time"}),Object(Y.jsx)("th",{children:"Duration"}),Object(Y.jsx)("th",{children:"Shares"}),Object(Y.jsx)("th",{children:"Buy Price"}),Object(Y.jsx)("th",{children:"Sell Price"}),Object(Y.jsx)("th",{children:"Profit ($)"}),Object(Y.jsx)("th",{children:"Profit (%)"})]}),e.map((function(e,t){var n=e.buy,r=e.sell;return Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("td",{children:n.symbol}),Object(Y.jsx)("td",{className:"small-font",children:P(n.date)}),Object(Y.jsx)("td",{className:"small-font",children:P(r.date)}),Object(Y.jsx)("td",{children:C(e)}),Object(Y.jsx)("td",{children:n.qty}),Object(Y.jsx)("td",{children:q(n.price)}),Object(Y.jsx)("td",{children:q(r.price)}),Object(Y.jsx)("td",{children:q(D([e]))}),Object(Y.jsx)("td",{children:F(L([e]))})]},t)}))]})}},{key:"render",value:function(){return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h3",{children:"Trades"}),this.renderTrades()]})}}]),n}(s.a.Component),I=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=N(this.props.trades),t=function(e){if(!e||0===e.length)return null;var t=e.reduce((function(e,t){return e+t}),0);return t?t/e.length:null}(e.map((function(e){return e.buy.price*e.buy.qty})));return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h3",{children:"Performance"}),Object(Y.jsxs)("table",{className:"performance",children:[Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{children:"Profit ($)"}),Object(Y.jsx)("td",{children:q(D(e),2)}),Object(Y.jsx)("th",{children:"Accuracy (%)"}),Object(Y.jsx)("td",{children:F(S(e))}),Object(Y.jsx)("th",{children:"Wins "}),Object(Y.jsx)("td",{children:w(e).numWon}),Object(Y.jsx)("th",{children:"Average Position Size ($) "}),Object(Y.jsx)("td",{children:q(t)})]}),Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{children:"Profit (%)"}),Object(Y.jsx)("td",{children:F(L(e))}),Object(Y.jsx)("th",{children:"P/L Ratio "}),Object(Y.jsx)("td",{children:p(T(e),2)}),Object(Y.jsx)("th",{children:"Losses "}),Object(Y.jsx)("td",{children:w(e).numLost})]})]})]})}}]),n}(s.a.Component),B=n(19),U=(n(30),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={trades:[],dates:null,showCalendar:!1},r}return Object(h.a)(n,[{key:"onFileChange",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files&&0!==t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.files[0],e.next=5,O(n);case 5:r=e.sent,this.setState({trades:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDatesChanged",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({dates:t,showCalendar:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderDates",value:function(){var e=this,t="Filter by dates";if(this.state.dates){var n=k()(this.state.dates[0]).format("MMM Do, YYYY"),r=k()(this.state.dates[1]).format("MMM Do, YYYY");t=n===r?n:"".concat(n," - ").concat(r)}return[Object(Y.jsxs)("button",{className:"dates",onClick:function(t){e.setState({showCalendar:!e.state.showCalendar})},children:[t,Object(Y.jsx)("span",{className:"link",style:{fontSize:"0.6em",margin:"1em",padding:"0.25em",borderRadius:"0.4em",background:"white"},onClick:function(t){t.stopPropagation(),e.onDatesChanged(null)},children:"Reset"})]}),this.state.showCalendar?Object(Y.jsx)("div",{style:{position:"fixed"},children:Object(Y.jsx)(B.a,{selectRange:!0,maxDate:new Date,onChange:function(t){return e.onDatesChanged(t)},value:this.state.dates})}):null]}},{key:"renderMessage",value:function(){if(!this.state.trades.length)return Object(Y.jsxs)("h3",{children:[Object(Y.jsx)("label",{htmlFor:"file",className:"link",children:"Upload a CSV"})," ","to get started"]})}},{key:"render",value:function(){var e=this,t=this.state.trades.filter((function(t){return null===e.state.dates||t.date.getTime()>e.state.dates[0].getTime()&&t.date.getTime()<e.state.dates[1].getTime()}));return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("label",{htmlFor:"file",className:"file",children:"Upload CSV"}),Object(Y.jsx)("input",{type:"file",id:"file",onChange:function(t){return e.onFileChange(t)}}),this.renderDates(),this.state.trades.length?[Object(Y.jsx)(I,{trades:t}),Object(Y.jsx)(W,{trades:t})]:this.renderMessage()]})}}]),n}(s.a.Component)),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};i.a.render(Object(Y.jsx)(s.a.StrictMode,{children:Object(Y.jsx)(U,{})}),document.getElementById("root")),R()}},[[33,1,2]]]);
//# sourceMappingURL=main.a19d93bc.chunk.js.map